{% block style %}
<head>
  <title>Vulnerability Manager</title>

<style>
*,
*::before,
*::after {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

/*html,
body {
  width: 100vw;
  height: 100vh;
}*/

ul {
  list-style-type: none;
}

.slider-container {
  width: 100%;
  /*height: 100%;*/
  color: #fff;
  overflow: hidden;
  position: relative;
  padding-bottom: 22px;
}
.slider-container.slider--vertical .ms-track {
  flex-direction: column;
}
.slider-container.slider--horizontal .ms-track {
  flex-direction: row;
}

.ms-track {
  display: flex;
  flex-wrap: nowrap;
  transition: transform 0.75s cubic-bezier(0.86, 0, 0.07, 1);
}

.ms-slide {
  width: 100%;
  /*height: 100vh;*/
  flex-shrink: 0;
  display: flex;
  justify-content: center;
  align-items: center;
  position: relative;
  text-align: left;
}

.slider--vertical .ms-track {
  flex-direction: column;
}

.slider--horizontal .ms-track {
  flex-direction: row;
}

.slider--vertical .ms-track.reverse {
  flex-direction: column-reverse;
}

.slider--horizontal .ms-track.reverse {
  flex-direction: row-reverse;
}

blockquote h2::before {
  margin-right: 10px;
  content: '\201C';
}
blockquote h2::after {
  margin-left: 10px;
  content: '\201D';
}

.pagination {
  display: flex;
  position: absolute;
  z-index: 10;
}
.pagination.pagination--top, .pagination.pagination--bottom {
  left: 50%;
  transform: translateX(-50%);
}
.pagination.pagination--right, .pagination.pagination--left {
  flex-direction: column;
  top: 50%;
  transform: translateY(-50%);
}
.pagination.pagination--top {
  top: 2.5%;
}
.pagination.pagination--right {
  right: 0.5%;
}
.pagination.pagination--bottom {
  bottom: -5.0%;
  opacity: 0.75;
}
.pagination.pagination--left {
  left: 0.5%;
}
.pagination__button {
  display: block;
  position: relative;
  width: 15px;
  height: 15px;
  border-radius: 50%;
  background-color: #fff;
  margin: 5px;
  cursor: pointer;
  transition: all 0.25s ease-in-out;
}
.pagination__item--active .pagination__button, .pagination__item:hover .pagination__button {
  background-color: #222222;
  box-shadow: 0 0 5px #000;
}

</style>
<style>
.user-profile {
  margin: 0;
}
.user-profile .profile-card {
  /*background-color: #eae9ec;*/
  color: #050506;
  padding: 15vmin 20vmin;
  text-align: center;
  /*background: linear-gradient(45deg, #eae9ec calc(100% - 300px), #fff calc(100% - 300px), #fff calc(100% - 296px), #0ce18b calc(100% - 296px));*/
  padding-top: 12px;
  padding-bottom: 16px;
}
@media (min-width: 800px) {
  .profile-card {
    padding-bottom: 25vmin;
  }
}
.user-profile .profile-card__title {
  font-family: 'exo_2regular', sans-serif;
  font-weight: 500;
  font-style: normal;
  text-decoration: none;
  letter-spacing: 0.04em;
  line-height: 1;
  text-transform: uppercase;
  margin: 0;
  font-size: calc(10px + 5vmin);
  color: rgb(255, 255, 255, 0.75) !important;
  padding-bottom: 5%;
  text-shadow: -2px 0 black, 0 2px black, 2px 0 black, 0 -2px black;
}
.user-profile .profile-card__subtitle {
  margin: 0;
  color: #615e6e;
  font-size: 18px;
  margin-bottom: 96px;
}
.user-profile .profile-card__subtitle::before {
  content: '@';
}
.user-profile .profile-card__avatar {
  display: inline-block;
  margin: 0;
  border-radius: 50%;
  border: 4px solid #fff;
  width: 100px;
  height: 100px;
}
.user-profile .profile-projects h2 {
  display: none;
}
.user-profile .cards {
  padding: 0 20px;
  list-style: none;
  max-width: 1000px;
  margin: 20px auto;
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(24ch, 1fr));
  grid-gap: 20px;
}
@media (min-width: 800px) {
  .cards {
    margin-top: -15vmin;
    grid-template-columns: repeat(auto-fit, minmax(28ch, 1fr));
  }
}
.user-profile .card {
  display: flex;
  flex-direction: column;
  background-color: rgb(255, 255, 255, 0.5);
  color: #1d1c21;
  text-decoration: none;
  padding: 20px;
  height: 8em;
  box-shadow: 0 2px 4px rgba(29,28,33,0.2);
  border-radius: 8px;
  border: 1px solid rgb(227, 227, 227, 0.5);
}
.user-profile .card:hover {
  background-color: #eae9ec;
}
.user-profile .card:focus {
  outline: 2px solid #0d62e0;
}
.user-profile .card:hover,
.user-profile .card:focus {
  box-shadow: 0 2px 2px rgba(29,28,33,0.5);
}
.user-profile .card__title {
  font-size: 18px;
  margin: 0;
  font-family: 'exo_2regular', sans-serif;
  text-transform: uppercase;

}
.user-profile .card__meta {
  margin: auto 0 0 0;
  /*color: #9491a1;*/
}
.user-profile a {
	text-decoration: none !important;
	outline: none !important;
	/*border: none !important;*/
}
.task_nav {
  font-size: 60px;
}
.task_nav.left {
  left: 10%;
  position: absolute;
bottom: 50%;
z-index: 5000;
}
.task_nav.left i:hover {
  color: #eae9ec;
  opacity: 0.75;
}
.task_nav.right {
  right: 10%;
  position: absolute;
bottom: 50%;
z-index: 5000;
}
.task_nav.right i:hover {
  color: #eae9ec;
  opacity: 0.75;
}

.multiselect_2 {

}

.selectBox {
  position: relative;
}

.selectBox select {
  width: 100%;
  {#font-weight: bold;#}
}

.overSelect {
  position: absolute;
  left: 0;
  right: 0;
  top: 0;
  bottom: 0;
}

.dyn_checkboxes {
  display: none;
  {#border: 1px #dadada solid;#}
}

.dyn_checkboxes label {
  display: block;
}

.dyn_checkboxes label:hover {
  {#background-color: #1e90ff;#}
}

</style>

</head>
{% endblock%}

{% extends 'base_auth.html' %}

{% block app_content %}

    {{ super() }}

<div class="app_content_container">
  <!-- The Grid -->
  <div class="grid_container">

    {% if cls %}
      <input id="cur_pg" type="hidden" value="1" />
      <input id="cur_per" type="hidden" value="1" />
    {% endif %}

  	<div class="user-profile">
      <div class="task_nav">
  	    <div class="task_nav left invisible" id="nav_left">
          <div class="fas fa-angle-left"></div>
        </div>
        <div class="task_nav right{% if task_tot < per_slide %} invisible{% endif %}" id="nav_right">
          {% if task_tot > per_slide %}
          <div class="fas fa-angle-right"></div>
          {% endif %}
        </div>
      </div>
	  <div class="profile-card">
	    <h1 class="profile-card__title">{{ menu_title }}</h1>
        {% if cls %}
          <span class="su_tooltip_menu">
            <div id="table_add_btn" class="fas fa-plus-square" onclick="showModal('add_modal')" style="font-size: xx-large;"></div>
            <span class="su_tooltiptext">Add New</span>
          </span>
        {% endif %}
	    <div class="profile-projects">
	      <h2></h2>
          <!-- added -->
          {% if task_tot > per_slide %}<div class="slider-container slider--horizontal">{% endif %}

          <!-- added -->
          <ul class="pagination pagination--bottom" id="task_lists">

            {% for i in slide %}
              <li class="pagination__item{% if i == 0 %} pagination__item--active{% endif %}"><a class="pagination__button"></a></li>
            {% endfor %}

          </ul>

          <ul class="ms-track">

            {% for i in slide %}
              <li class="ms-slide">
                <ol class="cards">
                {% for j in slide[i] %}
                  <li{% if 'modal' in slide[i][j] %} onclick="loadWindowMenuModal('integration', '{{ slide[i][j]['title'] }}')"{% endif %}>
		            {% if cls%}
                    <div class="card">
                    {% else%}
                    <a class="card" href="{{ slide[i][j]['link'] }}">
                    {% endif %}
		              <h4 class="card__title" style="align-self: center";>{{ slide[i][j]['title'] }}</h4>
                      {% if 'icon' in slide[i][j] %}
                        <div style="align-self:center;margin-top: auto;" class="{{ slide[i][j]['icon'] }} fa-2x fa-fw"></div>
                      {% elif 'img' in slide[i][j] %}
                        <img src="/static/images/{{ slide[i][j]['img'] }}" alt="image" style="height: 30px;align-self:center;margin-top: auto;">
                      {% else %}
                        <div class="card__meta" style="margin-left: auto;margin-right: auto;display: flex;">
                          {% if cls %}

                          <div class="inbedded_link" onclick="jsGet('{{ slide[i][j]['link'] }}')" style="margin: 3px;">
                            <span class="su_tooltip_menu">
                              <div class="fas fa-users"></div>
                              <span class="su_tooltiptext">Team Members</span>
                            </span>
                          </div>

                          <div class="inbedded_link" onclick="loadItemContent('{{ slide[i][j]["id"] }}', cat, docname, 'edit')" style="margin: 3px;">
                            <span class="su_tooltip_menu">
                              <div class="fas fa-edit"></div>
                              <span class="su_tooltiptext">Edit</span>
                            </span>
                          </div>

                          <div class="inbedded_link" onclick="loadItemContent('{{ slide[i][j]["id"] }}', cat, docname, 'info')" style="margin: 3px;">
                            <span class="su_tooltip_menu">
                              <div class="info fas fa-info-circle"></div>
                              <span class="su_tooltiptext">More Info</span>
                            </span>
                          </div>

                          <div class="inbedded_link" onclick="removeItemDb('{{ slide[i][j]["id"] }}')" style="margin: 3px;">
                            <span class="su_tooltip_menu">
                              <div class="far fa-trash-alt"></div>
                              <span class="su_tooltiptext">Delete</span>
                            </span>
                          </div>

                          {% endif %}
                        </div>
                      {% endif %}
		            {% if cls%}
                    </div>
                    {% else%}
                    </a>
                    {% endif %}
		          </li>
                {% endfor %}
                </ol>
              </li>
            {% endfor %}
                  
          </ul>

          {% if task_tot > per_slide %}</div>{% endif %}

		</div>
	  </div>
	</div>
  	<!-- End of Dynamic content -->

  <!-- End of Grid -->
  </div>

  <!--  Modal section  -->
    <!-- window_menu_modal modal -->
    {% if modules and 'window_menu_modal' in modules %}
    <input id="active_integration_name" type="hidden" value="">
    <div id="window_menu_modal" class="modal">
    {% include "window_menu_modal.html" %}
    </div>

    <div id="activate_integration_modal" class="modal">
    {% include "activate_integration_modal.html" %}
    </div>

    <div id="integration_policy_modal" class="modal">
    {% include "integration_policy_modal.html" %}
    </div>

    {% endif %}
    <!-- end window_menu_modal modal -->
    <!-- add modal -->
    {% if cls %}
      {% include "add_modal.html" %}
    {% endif %}
    <!-- end add modal -->
  <!--  End Modal section  -->

  <!-- info modal -->
    <div id="info_modal" class="modal">
    </div>
  <!-- end info modal -->

  <!-- edit modal -->
  {% if cls and 'edit' in cls['modules'] %}
    <div id="edit_modal" class="modal">
    </div>
  {% endif %}
  <!-- end edit modal -->

</div>

<!-- End Page Container -->



{% endblock %}

 


{% block scripts %}
{{ super() }}
<!-- page-specific scripts -->

<script>
{% if cls %}
var cat = '{{ cls['specs']['cat'] }}';
var docname = '{{ cls['specs']['docname'] }}';
var table_type = '{{ table_type }}'
var act_id = '';
{% endif %}

  {% if cls and 'delete' in cls['modules'] %}
      var removeItemDb_url = '{{ cls['modules']['delete']['url'] }}';
  {% endif %}

var cur_index = 0;
let sliders = document.querySelectorAll('.slider-container')

sliders.forEach(sliderInit)

function sliderInit(element) {

  let pagination = element.querySelector('.pagination'),
      msTrack = element.querySelector('.ms-track'),
      slides = [].filter.call(msTrack.children, child => child.classList.contains('ms-slide')).length,
      slideHorizontal = element.classList.contains('slider--horizontal'),
      slideVertical = element.classList.contains('slider--vertical')

  if (slideVertical) {
    pagination.addEventListener('click', slideV)
  }

  if (slideHorizontal) {
    pagination.addEventListener('click', slideH)
  }

  document.getElementById('nav_right').addEventListener('click', pageR);
  document.getElementById('nav_left').addEventListener('click', pageL);

  function slideV(event) {
    let target = event.target,
        targetParent = target.parentNode,
        paginationItems = [].slice.call(this.children)

    if (target.matches('.pagination__button')) {
      let index = paginationItems.indexOf(targetParent);
      targetParent.classList.add('pagination__item--active')

      siblings(targetParent).forEach(element => element.classList.remove('pagination__item--active'))
      // move the titles slider (vertical, reverse)
      vertical(msTrack, index, slides)
    }

    console.log('debugger')
  }

  function slideH(event) {
    let target = event.target,
        targetParent = target.parentNode,
        paginationItems = [].slice.call(this.children)
    
    

    if (target.matches('.pagination__button')) {
      let index = paginationItems.indexOf(targetParent);
      cur_index = index;
      if (cur_index == paginationItems.length-1) {
        document.getElementById('nav_right').classList.remove("visible");
	    document.getElementById('nav_right').classList.add("invisible");
      }
      else {
        document.getElementById('nav_right').classList.remove("invisible");
	    document.getElementById('nav_right').classList.add("visible");
      }

      if (cur_index == 0) {
	    document.getElementById('nav_left').classList.remove("visible");
	    document.getElementById('nav_left').classList.add("invisible");
      }
      else {
	    document.getElementById('nav_left').classList.remove("invisible");
	    document.getElementById('nav_left').classList.add("visible");
      }

      targetParent.classList.add('pagination__item--active')

      siblings(targetParent).forEach(element => element.classList.remove('pagination__item--active'))
      // move the titles slider (vertical, reverse)
      horizontal(msTrack, index, slides)
    }
    console.log('debugger')
  }

  function pageR() {
	if (cur_index == 0) {
	  document.getElementById('nav_left').classList.remove("invisible");
	  document.getElementById('nav_left').classList.add("visible");
    }
    var task_list = document.getElementById('task_lists');
    let paginationItems = [].slice.call(task_list.children),
        targetParent = paginationItems[cur_index+1],
        index = cur_index + 1;
    cur_index = cur_index + 1;
    if (cur_index == paginationItems.length-1) {
      document.getElementById('nav_right').classList.remove("visible");
	  document.getElementById('nav_right').classList.add("invisible");
    }


    targetParent.classList.add('pagination__item--active')

    siblings(targetParent).forEach(element => element.classList.remove('pagination__item--active'))
    // move the titles slider (vertical, reverse)
    horizontal(msTrack, index, slides)
  }

  function pageL() {
  	if (cur_index == 1) {
	  document.getElementById('nav_left').classList.remove("visible");
	  document.getElementById('nav_left').classList.add("invisible");
    }
    var task_list = document.getElementById('task_lists');
    let paginationItems = [].slice.call(task_list.children),
        targetParent = paginationItems[cur_index-1],
        index = cur_index - 1;
    cur_index = cur_index - 1;
    if (cur_index == paginationItems.length-2) {
      document.getElementById('nav_right').classList.remove("invisible");
	  document.getElementById('nav_right').classList.add("visible");
    }

    targetParent.classList.add('pagination__item--active')

    siblings(targetParent).forEach(element => element.classList.remove('pagination__item--active'))
    // move the titles slider (vertical, reverse)
    horizontal(msTrack, index, slides)
  }

  console.log('debugger')
}




function horizontal(element, index, length, reverse = false) {
  let slidingDist = 100 * index
  element.style.transform = `translateX(${reverse ? '': '-'}${slidingDist}%)`
  console.log('debugger')
}

function vertical(element, index, length, reverse = false) {
  let slidingDist = (100 / length) * index
  element.style.transform = `translateY(${reverse ? '': '-'}${slidingDist}%)`
  console.log('debugger')
}

function siblings(element) {
  return Array.prototype.filter.call(element.parentNode.children, function (child) {
    return child !== element;
  });
  console.log('debugger')
}


</script>
<script>
var feature_dict = {
    'Amazon Web Services': [
      'Inventory and Manage AWS Resources',
      'Audit and Secure AWS Resources',
      'Apply Security and Compliance Policies'
    ],
    'Bitbucket': [
      'Scan Repositories for Security Policy Violations',
      'Identify Critical Misconfigurations'
    ],
    'Chrome': [
      'Web Browser CIS Audit',
      'Identify and Block Malicious Scripts'
    ],
    'Cloudflare': [
      'Monitor for DDoS Threats directly from the Security Universal Console',
      'Manage Cloudflare Configurations'
    ],
    'Confluence': [
      'Create and Update Confluence Pages from Security Universal Console',
      'Manage Confluence Resources and Configurations'
    ],
    'Digital Ocean': [
      'Inventory and Manage Digital Ocean Resources',
      'Audit and Secure Digital Ocean Resources',
      'Apply Security and Compliance Policies'
    ],
    'Docker': [
      'Manage Docker Resources directly from the Security Universal Console',
      'Audit and Secure Docker Resources',
      'Apply Security and Compliance Policies'
    ],
    'Dropbox': [
      'Manage Dropbox Resources Directly from the Security Universal Console',
      'Audit Dropbox Resources for Viruses and Threats'
    ],
    'Firefox': [
      'Web Browser CIS Audit',
      'Identify and Block Malicious Scripts'
    ],
    'Git': [
      'Scan Repositories for Security Policy Violations',
      'Identify Critical Misconfigurations'
    ],
    'Github': [
      'Scan Repositories for Security Policy Violations',
      'Identify Critical Misconfigurations'
    ],
    'Gitlab': [
      'Scan Repositories for Security Policy Violations',
      'Identify Critical Misconfigurations'
    ],
    'Google Cloud': [
      'Inventory and Manage Google Cloud Resources',
      'Audit and Secure Google Cloud Resources',
      'Apply Security and Compliance Policies'
    ],
    'Google Drive': [
      'Manage Google Drive Resources Directly from the Security Universal Console',
      'Audit Google Drive Resources for Viruses and Threats'
    ],
    'Hacker News': ['TBD', 'TBD'],
    'Hacker Rank': ['TBD', 'TBD'],
    'Internet Explorer': [
      'Web Browser CIS Audit',
      'Identify and Block Malicious Scripts'
    ],
    'Jenkins': [
      'Execute Jenkins Builds directly from the Security Universal Console',
      'Audit Jenkins Configurations for Security Threats and/or Compliance Violations'
    ],
    'Jira': [
      'Create New Jira Tickets from Security Universal Alerts',
      'Manage and update Jira resources directly from the Security Universal Console'
    ],
    'Kubernetes': [
      'Discover and Monitor Namespaces',
      'Discover and Monitor Pods'
    ],
    'Mail Chimp': [
      'Manage Mail Chimp Resources directly from the Security Universal Console',
      'Audit Mail Chimp Configurations for Security Threats and/or Compliance Policy Violations'
    ],
    'Microsoft Active Directory': [
      'Discover and Manage Active Directory Resources directly from the Security Universal Console',
      'Audit and Secure Active Directory Resources'
    ],
    'Microsoft Azure': [
      'Inventory and Manage Microsoft Azure Resources',
      'Audit and Secure Microsoft Azure Resources',
      'Apply Security and Compliance Policies'
    ],
    'Octopus Deploy': [
      'Execute Octopus Builds directly from the Security Universal Console',
      'Audit Octopus Configurations for Security Threats and/or Compliance Violations'
    ],
    'PagerDuty': [
      'Manage PagerDuty Alerts and Resources directly from the Security Universal Console',
      'Send Security Universal Alerts to PagerDuty'
    ],
    'Safari': [
      'Web Browser CIS Audit',
      'Identify and Block Malicious Scripts'
    ],
    'Slack': [
      'Send Alerts Directly to a Slack Channel',
      'Respond to Slack Messages directly from the Security Universal Console'
    ],
    'Snort': [
      'Manage and Updates Rules and Rulesets',
      'Aggregate Alerts across various Enterprise Environments'
    ],
    'Trello': [
      'Task Planning Integration with Security Universal',
      'Manage Trello Tasks directly from Security Universal Console'
    ]
};
var requirement_dict = {
    'Amazon Web Services': ['AWS IAM User Account (Full Privileges Required)'],
    'Bitbucket': ['App Password'],
    'Chrome': ['Username and Password'],
    'Cloudflare': ['Username and Password'],
    'Confluence': ['Username and Password'],
    'Digital Ocean': ['Username and Password'],
    'Docker': ['Username and Password'],
    'Dropbox': ['Username and Password'],
    'Firefox': ['Username and Password'],
    'Git': ['Username and Password'],
    'Github': ['Username and Password'],
    'Gitlab': ['Username and Password'],
    'Google Cloud': ['Username and Password'],
    'Google Drive': ['Username and Password'],
    'Hacker News': ['Username and Password'],
    'Hacker Rank': ['Username and Password'],
    'Internet Explorer': ['Username and Password'],
    'Jenkins': ['Username and Password'],
    'Jira': ['Username and Password'],
    'Kubernetes': ['kubeconfig file'],
    'Mail Chimp': ['Username and Password'],
    'Microsoft Active Directory': ['Username and Password'],
    'Microsoft Azure': ['Username and Password'],
    'Octopus Deploy': ['Username and Password'],
    'PagerDuty': ['Username and Password'],
    'Safari': ['Username and Password'],
    'Slack': ['Username and Password'],
    'Snort': ['Username and Password'],
    'Trello': ['Username and Password']
};
var configuration_dict = {
    'Amazon Web Services': [
      'Add your AWS IAM User Account Credentials',
      'Use this wizard to configure initial options',
      '<a href="/cloud_man_settings">Configure additional settings</a>'
    ],
    'Bitbucket': [
      'Create and Add your App Password',
      '<a href="/devops_man_settings">Configure additional settings</a>'
    ],
    'Chrome': [
      'Add your Username and Password',
      '<a href="/browsersec_man_settings">Configure additional settings</a>'
    ],
    'Cloudflare': [
      'Add your Username and Password',
      '<a href="/in_resp_settings">Configure additional settings</a>'
    ],
    'Confluence': [
      'Add your Username and Password',
      '<a href="/operations_man_settings">Configure additional settings</a>'
    ],
    'Digital Ocean': [
      'Add your Username and Password',
      '<a href="/cloud_man_settings">Configure additional settings</a>'
    ],
    'Docker': [
      'Add your Username and Password',
      '<a href="/devops_man_settings">Configure additional settings</a>'
    ],
    'Dropbox': [
      'Add your Username and Password',
      '<a href="/operations_man_settings">Configure additional settings</a>'
    ],
    'Firefox': [
      'Add your Username and Password',
      '<a href="/browsersec_man_settings">Configure additional settings</a>'
    ],
    'Git': [
      'Add your Username and Password',
      '<a href="/devops_man_settings">Configure additional settings</a>'
    ],
    'Github': [
      'Add your Username and Password',
      '<a href="/devops_man_settings">Configure additional settings</a>'
    ],
    'Gitlab': [
      'Add your Username and Password',
      '<a href="/devops_man_settings">Configure additional settings</a>'
    ],
    'Google Cloud': [
      'Add your Username and Password',
      '<a href="/cloud_man_settings">Configure additional settings</a>'
    ],
    'Google Drive': [
      'Add your Username and Password',
      '<a href="/operations_man_settings">Configure additional settings</a>'
    ],
    'Hacker News': [
      'Add your Username and Password',
      '<a href="/threathunt_man_settings">Configure additional settings</a>'
    ],
    'Hacker Rank': [
      'Add your Username and Password',
      '<a href="/threathunt_man_settings">Configure additional settings</a>'
    ],
    'Internet Explorer': [
      'Add your Username and Password',
      '<a href="/browsersec_man_settings">Configure additional settings</a>'
    ],
    'Jenkins': [
      'Add your Username and Password',
      '<a href="/devops_man_settings">Configure additional settings</a>'
    ],
    'Jira': [
      'Add your Username and Password',
      '<a href="/operations_man_settings">Configure additional settings</a>'
    ],
    'Kubernetes': [
      'Upload the kubeconfig file',
      'Use this wizard to configure initial options',
      '<a href="/devops_man_settings">Configure additional settings</a>'
    ],
    'Mail Chimp': [
      'Add your Username and Password',
      '<a href="/emailsec_man_settings">Configure additional settings</a>'
    ],
    'Microsoft Active Directory': [
      'Add your Username and Password',
      '<a href="/as_man_settings">Configure additional settings</a>'
    ],
    'Microsoft Azure': [
      'Add your Username and Password',
      '<a href="/cloud_man_settings">Configure additional settings</a>'
    ],
    'Octopus Deploy': [
      'Add your Username and Password',
      '<a href="/devops_man_settings">Configure additional settings</a>'
    ],
    'PagerDuty': [
      'Add your Username and Password',
      '<a href="/in_resp_settings">Configure additional settings</a>'
    ],
    'Safari': [
      'Add your Username and Password',
      '<a href="/browsersec_man_settings">Configure additional settings</a>'
    ],
    'Slack': [
      'Add your Username and Password',
      '<a href="/operations_man_settings">Configure additional settings</a>'
    ],
    'Snort': [
      'Add your Username and Password',
      '<a href="/ids_man_settings">Configure additional settings</a>'
    ],
    'Trello': [
      'Add your Username and Password',
      '<a href="/operations_man_settings">Configure additional settings</a>'
    ]
};
function loadWindowMenuModal(type, entity_name) {
  document.getElementById('active_integration_name').value = entity_name;
  var s_modal = 'window_menu_modal';
  document.getElementById('settings_card_title').innerHTML = entity_name;
  if (type == 'integration') {
    var features = '<ul style="list-style-type: square;">';
    for (i = 0; i < feature_dict[entity_name].length; i++) {
      features += '<li style="margin-left: 2rem;">' + feature_dict[entity_name][i] + "</li>";
    };
    features += "</ul>" 
    var requirements = '<ul style="list-style-type: square;">';
    for (i = 0; i < requirement_dict[entity_name].length; i++) {
      requirements += '<li style="margin-left: 2rem;">' + requirement_dict[entity_name][i] + "</li>";
    };
    requirements += "</ul>"
    var configurations = '<ul style="list-style-type: square;">';
    for (i = 0; i < configuration_dict[entity_name].length; i++) {
      configurations += '<li style="margin-left: 2rem;">' + configuration_dict[entity_name][i] + "</li>";
    };
    configurations += "</ul>" 
    var new_html = `<strong><h4>Features</h4></strong><p>${features}</p><br><strong><h4>Requirements</h4></strong><p>${requirements}</p><br><strong><h4>Configuration</h4></strong><p>${configurations}</p>`;
    document.getElementById('wmm_modal_content').innerHTML = new_html;
  };
  showModal(s_modal);
};
var policy_dict = {
  'Amazon Web Services': {
    'name': 'Required IAM Policy',
    'policy': '{<br>&nbsp;&nbsp;&nbsp;&nbsp;"Version": "2012-10-17",<br>&nbsp;&nbsp;&nbsp;&nbsp;"Statement": [<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"Sid": "SUAuditPolicy",<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"Effect": "Allow",<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"Action": [<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"iam:GenerateCredentialReport",<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"iam:GetPolicyVersion",<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"iam:GetAccountPasswordPolicy",<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"ec2:DescribeAddresses",<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"ec2:DescribeInstances",<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"ec2:DescribeFlowLogs",<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"iam:ListVirtualMFADevices",<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"iam:ListAttachedUserPolicies",<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"iam:GetCredentialReport",<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"ec2:DescribeNetworkAcls",<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"ec2:DescribeRouteTables",<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"iam:ListPolicies",<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"ec2:DescribeIamInstanceProfileAssociations",<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"ec2:DescribeTags",<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"ec2:DescribeCustomerGateways",<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"config:DescribeConfigurationRecorderStatus",<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"cloudtrail:DescribeTrails",<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"ec2:DescribeSecurityGroups",<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"kms:ListKeys",<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"config:DescribeConfigurationRecorders",<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"ec2:DescribeVpcs",<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"cloudwatch:DescribeAlarms",<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"iam:ListUsers",<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"ec2:DescribeSubnets",<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"ec2:DescribeVpnGateways"<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"Resource": "*"<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;]<br>}<br>'
  }
}
function setIntegrationPolicyActive(entity_name) {
  document.getElementById('policy_title').innerHTML = policy_dict[entity_name]['name']
  document.getElementById('policy_text').innerHTML = policy_dict[entity_name]['policy']
}
function activateIntegrationModal() {
  var entity_name = document.getElementById('active_integration_name').value;
  var s_modal = 'activate_integration_modal';
  document.getElementById('activate_title').innerHTML = 'Activate Integration - ' + entity_name;
  form_fields_dict = {
      'Amazon Web Services': [{'label':'AWS Account Number', 'type':"text", 'name': "aws_account_num", 'required': true},
          {'label':'Cloud Group Name', 'type':"text", 'name': "group_name", 'required': true},
          {'label':'Access Key ID', 'type':"text", 'name': "user_name", 'required': true},
          {'label':'Access Key Secret', 'type':"password", 'name': "access_key", 'required': true},
          {'label':'Account Email (Optional)', 'type':"text", 'name': "acct_email", 'required': false},
          {'label':'AWS Regions (Select ALL)', 'type':"select_multiple", 'name': "aws_regions", 'required': true, 'fields': ['us-east-1', 'us-east-2', 'us-west-1', 'us-west-2', 'af-south-1', 'ap-east-1', 'ap-southeast-1', 'ap-southeast-2', 'ap-southeast-3', 'ap-south-1', 'ap-northeast-1', 'ap-northeast-2', 'ap-northeast-3', 'ca-central-1', 'eu-central-1', 'eu-west-1', 'eu-west-2', 'eu-west-3', 'eu-south-1', 'eu-north-1', 'me-south-1', 'sa-east-1', 'us-gov-east-1', 'us-gov-west-1']}
      ],
      'Bitbucket': [
          {'label':'App Password Label', 'type':"text", 'name': "username", 'required': true},
          {'label':'App Password', 'type':"password", 'name': "password", 'required': true}
      ],
      'Chrome': [
          {'label':'Username', 'type':"text", 'name': "username", 'required': true},
          {'label':'Password', 'type':"password", 'name': "password", 'required': true}
      ],
      'Cloudflare': [
          {'label':'Username', 'type':"text", 'name': "username", 'required': true},
          {'label':'Password', 'type':"password", 'name': "password", 'required': true}
      ],
      'Confluence': [
          {'label':'Username', 'type':"text", 'name': "username", 'required': true},
          {'label':'Password', 'type':"password", 'name': "password", 'required': true}
      ],
      'Digital Ocean': [
          {'label':'Username', 'type':"text", 'name': "username", 'required': true},
          {'label':'Password', 'type':"password", 'name': "password", 'required': true}
      ],
      'Docker': [
          {'label':'Username', 'type':"text", 'name': "username", 'required': true},
          {'label':'Password', 'type':"password", 'name': "password", 'required': true}
      ],
      'Dropbox': [
          {'label':'Username', 'type':"text", 'name': "username", 'required': true},
          {'label':'Password', 'type':"password", 'name': "password", 'required': true}
      ],
      'Firefox': [
          {'label':'Username', 'type':"text", 'name': "username", 'required': true},
          {'label':'Password', 'type':"password", 'name': "password", 'required': true}
      ],
      'Git': [
          {'label':'Username', 'type':"text", 'name': "username", 'required': true},
          {'label':'Password', 'type':"password", 'name': "password", 'required': true}
      ],
      'Github': [
          {'label':'Username', 'type':"text", 'name': "username", 'required': true},
          {'label':'Password', 'type':"password", 'name': "password", 'required': true}
      ],
      'Gitlab': [
          {'label':'Username', 'type':"text", 'name': "username", 'required': true},
          {'label':'Password', 'type':"password", 'name': "password", 'required': true}
      ],
      'Google Cloud': [
          {'label':'Username', 'type':"text", 'name': "username", 'required': true},
          {'label':'Password', 'type':"password", 'name': "password", 'required': true}
      ],
      'Google Drive': [
          {'label':'Username', 'type':"text", 'name': "username", 'required': true},
          {'label':'Password', 'type':"password", 'name': "password", 'required': true}
      ],
      'Hacker News': [
          {'label':'Username', 'type':"text", 'name': "username", 'required': true},
          {'label':'Password', 'type':"password", 'name': "password", 'required': true}
      ],
      'Hacker Rank': [
          {'label':'Username', 'type':"text", 'name': "username", 'required': true},
          {'label':'Password', 'type':"password", 'name': "password", 'required': true}
      ],
      'Internet Explorer': [
          {'label':'Username', 'type':"text", 'name': "username", 'required': true},
          {'label':'Password', 'type':"password", 'name': "password", 'required': true}
      ],
      'Jenkins': [
          {'label':'Username', 'type':"text", 'name': "username", 'required': true},
          {'label':'Password', 'type':"password", 'name': "password", 'required': true}
      ],
      'Jira': [
          {'label':'Username', 'type':"text", 'name': "username", 'required': true},
          {'label':'Password', 'type':"password", 'name': "password", 'required': true}
      ],
      'Kubernetes': [
          {'label':'Cluster Name', 'type':"text", 'name': "cluster_name", 'required': true},
          {'label':'Network Connector', 'type':"select", 'name': "network_connector", 'required': true},
          {'label':'kubeconfig File', 'type':'file" accept="text', 'name': "kubeconfig_file", 'required': true}
      ],
      'Mail Chimp': [
          {'label':'Username', 'type':"text", 'name': "username", 'required': true},
          {'label':'Password', 'type':"password", 'name': "password", 'required': true}
      ],
      'Microsoft Active Directory': [
          {'label':'Username', 'type':"text", 'name': "username", 'required': true},
          {'label':'Password', 'type':"password", 'name': "password", 'required': true}
      ],
      'Microsoft Azure': [
          {'label':'Username', 'type':"text", 'name': "username", 'required': true},
          {'label':'Password', 'type':"password", 'name': "password", 'required': true}
      ],
      'Octopus Deploy': [
          {'label':'Username', 'type':"text", 'name': "username", 'required': true},
          {'label':'Password', 'type':"password", 'name': "password", 'required': true}
      ],
      'PagerDuty': [
          {'label':'Username', 'type':"text", 'name': "username", 'required': true},
          {'label':'Password', 'type':"password", 'name': "password", 'required': true}
      ],
      'Safari': [
          {'label':'Username', 'type':"text", 'name': "username", 'required': true},
          {'label':'Password', 'type':"password", 'name': "password", 'required': true}
      ],
      'Slack': [
          {'label':'Username', 'type':"text", 'name': "username", 'required': true},
          {'label':'Password', 'type':"password", 'name': "password", 'required': true}
      ],
      'Snort': [
          {'label':'Username', 'type':"text", 'name': "username", 'required': true},
          {'label':'Password', 'type':"password", 'name': "password", 'required': true}
      ],
      'Trello': [
          {'label':'Username', 'type':"text", 'name': "username", 'required': true},
          {'label':'Password', 'type':"password", 'name': "password", 'required': true}
      ]
  }
  var new_html = '';
  if (entity_name in policy_dict) {
    setIntegrationPolicyActive(entity_name)
      new_html = new_html + `<a href="#" onclick="showModal('integration_policy_modal')">${policy_dict[entity_name]['name']}</a><br><br>`
    }
  for (i = 0; i < form_fields_dict[entity_name].length; i++) {
    if (form_fields_dict[entity_name][i]['required']) {
      var required_str = ' required';
    } else {
      var required_str = '';
    }
    var field = '<div class="settings_card_form_group"><label class="settings_card_form_label">'

    if (form_fields_dict[entity_name][i]['type'] == 'select') {
        field += `${form_fields_dict[entity_name][i]['label']}</label> <select class="settings_card_form_input dyn" type="${form_fields_dict[entity_name][i]['type']}" id="${form_fields_dict[entity_name][i]['name']}" name="${form_fields_dict[entity_name][i]['name']}"${required_str}>`
        field += '<option value="n/a" disabled>Select one</option>'
        field += `</select></div>`;
    } else if (form_fields_dict[entity_name][i]['type'] == 'select_multiple') {
        field += `${form_fields_dict[entity_name][i]['label']}</label><form style="padding: 0 !important;"><div class="multiselect_2"><div class="selectBox" onclick="showCheckboxes('${entity_name}')"><select id="Targets" name="Targets" class="settings_card_form_input dyn" style="font-weight: unset;"><option>select an option</option></select><div class="overSelect"></div></div><div class="dyn_checkboxes" id="checkboxes_${entity_name}">`
        for (j = 0; j < form_fields_dict[entity_name][i]['fields'].length; j++) {
            field += `<label for="${form_fields_dict[entity_name][i]['fields'][j]}" class="settings_card_form_label"><input class="active_${entity_name}" type="checkbox" id="${form_fields_dict[entity_name][i]['fields'][j]}" style="width: 5%" />${form_fields_dict[entity_name][i]['fields'][j]}</label>`
        }

        field += `</div></div></form></div>`
    } else {
        field += `${form_fields_dict[entity_name][i]['label']}</label> <input class="settings_card_form_input dyn" type="${form_fields_dict[entity_name][i]['type']}" id="${form_fields_dict[entity_name][i]['name']}" name="${form_fields_dict[entity_name][i]['name']}"${required_str}></div>`;
    }
    new_html += field
  };
  document.getElementById('aim_modal_content').innerHTML = new_html;
  hideModal('window_menu_modal');
  showModal(s_modal);
};
function activateIntegrationSubmit() {
  var entity_name = document.getElementById('active_integration_name').value;
  var form_data = new FormData();
  if (entity_name == 'Kubernetes') {
    var url = 'activate_kubernetes';
    var cluster_name = document.getElementById('cluster_name').value;
    var network_connector = document.getElementById('network_connector').value;
    var kubeconfig_file_el = document.getElementById('kubeconfig_file');
    var redirect_on_success = '/k8_clusters'

    form_data.append("cluster_name", cluster_name);
    form_data.append("network_connector", network_connector);
    form_data.append("kubeconfig_file", kubeconfig_file_el.files[0]);
  } else if (entity_name == 'Amazon Web Services') {
    var url = 'activate_aws';
    var aws_account_num = document.getElementById('aws_account_num').value;
    var group_name = document.getElementById('group_name').value;
    var user_name = document.getElementById('user_name').value;
    var access_key = document.getElementById('access_key').value;
    var acct_email = document.getElementById('acct_email').value;
    var regions = document.getElementsByClassName(`active_${entity_name}`);
    var regions_list = ''
    for (var i=0; i <regions.length; i++) {
        if (regions[i].checked) {
            regions_list = regions_list + regions[i].id + ',';
        }
    }
    var redirect_on_success = '/cloud_accounts'

    form_data.append("aws_account_num", aws_account_num);
    form_data.append("group_name", group_name);
    form_data.append("user_name", user_name);
    form_data.append("access_key", access_key);
    form_data.append("acct_email", acct_email);
    form_data.append("regions_list", regions_list);
  } else if (entity_name == 'Bitbucket') {
    var url = 'activate_bitbucket';
    var username = document.getElementById('username').value;
    var password = document.getElementById('password').value;
    var redirect_on_success = '/cloud_accounts'

    form_data.append("username", username);
    form_data.append("password", password);

  } else if (entity_name == 'Chrome') {
    var url = 'activate_chrome';
    var username = document.getElementById('username').value;
    var password = document.getElementById('password').value;
    var redirect_on_success = '/cloud_accounts'

    form_data.append("username", username);
    form_data.append("password", password);
  } else if (entity_name == 'Cloudflare') {
    var url = 'activate_cloudflare';
    var username = document.getElementById('username').value;
    var password = document.getElementById('password').value;
    var redirect_on_success = '/cloud_accounts'

    form_data.append("username", username);
    form_data.append("password", password);
  } else if (entity_name == 'Confluence') {
    var url = 'activate_confluence';
    var username = document.getElementById('username').value;
    var password = document.getElementById('password').value;
    var redirect_on_success = '/cloud_accounts'

    form_data.append("username", username);
    form_data.append("password", password);
  } else if (entity_name == 'Digital Ocean') {
    var url = 'activate_digitalocean';
    var username = document.getElementById('username').value;
    var password = document.getElementById('password').value;
    var redirect_on_success = '/cloud_accounts'

    form_data.append("username", username);
    form_data.append("password", password);
  } else if (entity_name == 'Docker') {
    var url = 'activate_docker';
    var username = document.getElementById('username').value;
    var password = document.getElementById('password').value;
    var redirect_on_success = '/cloud_accounts'

    form_data.append("username", username);
    form_data.append("password", password);
  } else if (entity_name == 'Dropbox') {
    var url = 'activate_dropbox';
    var username = document.getElementById('username').value;
    var password = document.getElementById('password').value;
    var redirect_on_success = '/cloud_accounts'

    form_data.append("username", username);
    form_data.append("password", password);
  } else if (entity_name == 'Firefox') {
    var url = 'activate_firefox';
    var username = document.getElementById('username').value;
    var password = document.getElementById('password').value;
    var redirect_on_success = '/cloud_accounts'

    form_data.append("username", username);
    form_data.append("password", password);
  } else if (entity_name == 'Git') {
    var url = 'activate_git';
    var username = document.getElementById('username').value;
    var password = document.getElementById('password').value;
    var redirect_on_success = '/cloud_accounts'

    form_data.append("username", username);
    form_data.append("password", password);
  } else if (entity_name == 'Github') {
    var url = 'activate_github';
    var username = document.getElementById('username').value;
    var password = document.getElementById('password').value;
    var redirect_on_success = '/cloud_accounts'

    form_data.append("username", username);
    form_data.append("password", password);
  } else if (entity_name == 'Gitlab') {
    var url = 'activate_gitlab';
    var username = document.getElementById('username').value;
    var password = document.getElementById('password').value;
    var redirect_on_success = '/cloud_accounts'

    form_data.append("username", username);
    form_data.append("password", password);
  } else if (entity_name == 'Google Cloud') {
    var url = 'activate_googlecloud';
    var username = document.getElementById('username').value;
    var password = document.getElementById('password').value;
    var redirect_on_success = '/cloud_accounts'

    form_data.append("username", username);
    form_data.append("password", password);
  } else if (entity_name == 'Google Drive') {
    var url = 'activate_googledrive';
    var username = document.getElementById('username').value;
    var password = document.getElementById('password').value;
    var redirect_on_success = '/cloud_accounts'

    form_data.append("username", username);
    form_data.append("password", password);
  } else if (entity_name == 'Hacker News') {
    var url = 'activate_hackernews';
    var username = document.getElementById('username').value;
    var password = document.getElementById('password').value;
    var redirect_on_success = '/cloud_accounts'

    form_data.append("username", username);
    form_data.append("password", password);
  } else if (entity_name == 'Hacker Rank') {
    var url = 'activate_hackerrank';
    var username = document.getElementById('username').value;
    var password = document.getElementById('password').value;
    var redirect_on_success = '/cloud_accounts'

    form_data.append("username", username);
    form_data.append("password", password);
  } else if (entity_name == 'Internet Explorer') {
    var url = 'activate_internetexplorer';
    var username = document.getElementById('username').value;
    var password = document.getElementById('password').value;
    var redirect_on_success = '/cloud_accounts'

    form_data.append("username", username);
    form_data.append("password", password);
  } else if (entity_name == 'Jenkins') {
    var url = 'activate_jenkins';
    var username = document.getElementById('username').value;
    var password = document.getElementById('password').value;
    var redirect_on_success = '/cloud_accounts'

    form_data.append("username", username);
    form_data.append("password", password);
  } else if (entity_name == 'Jira') {
    var url = 'activate_jira';
    var username = document.getElementById('username').value;
    var password = document.getElementById('password').value;
    var redirect_on_success = '/cloud_accounts'

    form_data.append("username", username);
    form_data.append("password", password);
  } else if (entity_name == 'Mail Chimp') {
    var url = 'activate_mailchimp';
    var username = document.getElementById('username').value;
    var password = document.getElementById('password').value;
    var redirect_on_success = '/cloud_accounts'

    form_data.append("username", username);
    form_data.append("password", password);
  } else if (entity_name == 'Microsoft Active Directory') {
    var url = 'activate_microsoftactivedirectory';
    var username = document.getElementById('username').value;
    var password = document.getElementById('password').value;
    var redirect_on_success = '/cloud_accounts'

    form_data.append("username", username);
    form_data.append("password", password);
  } else if (entity_name == 'Microsoft Azure') {
    var url = 'activate_azure';
    var username = document.getElementById('username').value;
    var password = document.getElementById('password').value;
    var redirect_on_success = '/cloud_accounts'

    form_data.append("username", username);
    form_data.append("password", password);
  } else if (entity_name == 'Octopus Deploy') {
    var url = 'activate_octopusdeploy';
    var username = document.getElementById('username').value;
    var password = document.getElementById('password').value;
    var redirect_on_success = '/cloud_accounts'

    form_data.append("username", username);
    form_data.append("password", password);
  } else if (entity_name == 'PagerDuty') {
    var url = 'activate_pagerduty';
    var username = document.getElementById('username').value;
    var password = document.getElementById('password').value;
    var redirect_on_success = '/cloud_accounts'

    form_data.append("username", username);
    form_data.append("password", password);
  } else if (entity_name == 'Safari') {
    var url = 'activate_safari';
    var username = document.getElementById('username').value;
    var password = document.getElementById('password').value;
    var redirect_on_success = '/cloud_accounts'

    form_data.append("username", username);
    form_data.append("password", password);
  } else if (entity_name == 'Slack') {
    var url = 'activate_slack';
    var username = document.getElementById('username').value;
    var password = document.getElementById('password').value;
    var redirect_on_success = '/cloud_accounts'

    form_data.append("username", username);
    form_data.append("password", password);
  } else if (entity_name == 'Snort') {
    var url = 'activate_snort'
    var username = document.getElementById('username').value;
    var password = document.getElementById('password').value;
    var redirect_on_success = '/cloud_accounts'

    form_data.append("username", username);
    form_data.append("password", password);
  } else if (entity_name == 'Trello') {
    var url = 'activate_trello';
    var username = document.getElementById('username').value;
    var password = document.getElementById('password').value;
    var redirect_on_success = '/cloud_accounts'

    form_data.append("username", username);
    form_data.append("password", password);
  };
  
  var xhttp = new XMLHttpRequest();
  var csrf_token = "{{ csrf_token() }}";
  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
        var ai_submit_el = document.getElementById('ai_submit')
        ai_submit_el.disabled = true;
        ai_submit_el.innerHTML = 'Activated';
        ai_submit_el.classList.add("activated");
        var warn_msg = `Successfully Registered!`
        document.getElementById('aim_warn_content').innerHTML = `<div class="settings_card_form_group"><label class="settings_card_form_label" style="color:green">${warn_msg}</label></div>`;  
        window.location.href = redirect_on_success;
    } else if (this.readyState == 4) {
        var warn_msg = 'Error: Please try again'
        document.getElementById('aim_warn_content').innerHTML = `<div class="settings_card_form_group"><label class="settings_card_form_label" style="color:red">${warn_msg}</label></div>`;
    }
  };
  xhttp.open("POST", url, true);
  xhttp.send(form_data); 
};
</script>

{% endblock %}